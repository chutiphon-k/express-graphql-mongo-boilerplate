require('source-map-support/register'),module.exports=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='/',b(b.s=6)}([function(a){a.exports=require('mongoose')},function(a,b,c){a.exports=c(22)},function(a){a.exports=require('express')},function(a){a.exports=require('apollo-errors')},function(a,b,c){'use strict';var d=c(23);c.d(b,'a',function(){return d.a})},function(a,b,c){'use strict';var d=c(28);c.d(b,'a',function(){return d.a})},function(a,b,c){a.exports=c(7)},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(2),e=c.n(d),f=c(8),g=c.n(f),h=c(9),i=c.n(h),j=c(10),k=c.n(j),l=c(11),m=c.n(l),n=c(12),o=c.n(n),p=c(0),q=c.n(p),r=c(13),s=c.n(r),t=c(14),u=c(32);s.a.setTheme({silly:'rainbow',input:'grey',verbose:'cyan',prompt:'grey',info:'green',data:'grey',help:'cyan',warn:'yellow',debug:'blue',error:'red'}),q.a.Promise=Promise;var v=e()();q.a.set('debug',!0),v.use(o()('dev')),v.use(g.a.json()),v.use(g.a.urlencoded({extended:!0})),v.use(i()()),v.use(k()()),v.use(m()()),v.use('/',t.a),v.use(function(a,b){b.status(404).json({message:'not found'})}),v.use(function(a,b,c){c.status(500).json(a)}),u.a.init(v)},function(a){a.exports=require('body-parser')},function(a){a.exports=require('compression')},function(a){a.exports=require('cors')},function(a){a.exports=require('helmet')},function(a){a.exports=require('morgan')},function(a){a.exports=require('colors')},function(a,b,c){'use strict';var d=c(2),e=c.n(d),f=c(15),g=c.n(f),h=c(3),i=c.n(h),j=c(16),k=Object(d.Router)();k.get('/graphql',Object(f.graphiqlExpress)({endpointURL:'/graphql'})),k.get('/',function(a,b){b.send('Express Graphql Mongo Boilerplate')}),k.post('/graphql',Object(f.graphqlExpress)(function(a){var b=a.user;return{schema:j.a,formatError:h.formatError,context:{user:b}}})),b.a=k},function(a){a.exports=require('apollo-server-express')},function(a,b,c){'use strict';var d=c(17),e=c.n(d),f=c(18),g=c(26);b.a=Object(d.makeExecutableSchema)({typeDefs:g.a,resolvers:f.a})},function(a){a.exports=require('graphql-tools')},function(a,b,c){'use strict';var d=c(19),e=c.n(d),f=c(33),g=c.n(f),h=c(20),i=c(24),j={Date:g.a,RootQuery:h,RootMutation:i};b.a=Object(d.merge)(j)},function(a){a.exports=require('lodash')},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(21);c.d(b,'users',function(){return d.a})},function(a,b,c){'use strict';var d=c(1),e=c.n(d),f=c(4),g=this;b.a=function(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}(e.a.mark(function a(){var b;return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.find({}).lean();case 2:return b=a.sent,a.abrupt('return',b);case 4:case'end':return a.stop();}},a,g)}))},function(a){a.exports=require('regenerator-runtime')},function(a,b,c){'use strict';var d=c(0),e=c.n(d),f=new e.a.Schema({username:{type:String,unique:!0},description:String,profileImage:String},{timestamps:!0});b.a=e.a.model('User',f)},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(25);c.d(b,'addUser',function(){return d.a})},function(a,b,c){'use strict';function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}var e=c(1),f=c.n(e),g=c(4),h=c(3),i=c.n(h),j=this,k=Object(h.createError)('FooError',{message:'A foo error has occurred'});b.a=function(){var a=d(f.a.mark(function a(b,c){var d,e,h=c.username,i=c.description;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.find({username:h});case 2:if(d=a.sent,!d){a.next=5;break}throw new k({data:{aaa:100}});case 5:return a.next=7,g.a.create({username:h,description:i});case 7:return e=a.sent,a.abrupt('return',e);case 9:case'end':return a.stop();}},a,j)}));return function(){return a.apply(this,arguments)}}()},function(a,b,c){'use strict';var d=c(27),e=c(31);b.a=[e.a,d.a,'\n\tscalar Date\n\n\tschema {\n\t\tquery: RootQuery\n\t\tmutation: RootMutation\n\t}\n']},function(a,b,c){'use strict';var d=c(5);b.a=function(){return['\n\ttype RootMutation {\n\t\taddUser(username: String!, description: String): User\n\t}\n',d.a]}},function(a,b,c){'use strict';var d=c(29);b.a=function(){return['\n\ttype User implements UserInterface {\n\t\t_id: ID!\n\t\tusername: String!\n\t\tdescription: String\n\t\tprofileImage: String\n\t\tcreatedAt: Date!\n\t\tupdatedAt: Date!\n\t}\n',d.a]}},function(a,b,c){'use strict';var d=c(30);c.d(b,'a',function(){return d.a})},function(a,b){'use strict';b.a=function(){return['\n\tinterface UserInterface {\n\t\t_id: ID!\n\t\tusername: String!\n\t\tdescription: String\n\t\tprofileImage: String\n\t}\n']}},function(a,b,c){'use strict';var d=c(5);b.a=function(){return['\n\ttype RootQuery {\n\t\tusers: [User]\n\t}\n',d.a]}},function(a,b,c){'use strict';function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}var e=c(1),f=c.n(e),g=c(0),h=c.n(g),i=this,j=process.env.PORT||3e3,k=process.env.MONGO_URL||'mongodb://localhost:27017/express-graphql-mongo-boilerplate',l=5,m=function(){var a=d(f.a.mark(function a(b){var c,d;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.connect(k);case 3:b.listen(j,function(){console.log(('[INFO] Listening on *: '+j).info)}),a.next=11;break;case 6:a.prev=6,a.t0=a['catch'](0),console.log('[Error] Cannot connect MongoDB'.error),c=0,d=setInterval(function(){console.log(('MongoDB not ready, retry in '+(l-c)+' seconds...').data),c===l&&(clearInterval(d),m(b)),++c},1e3);case 11:case'end':return a.stop();}},a,i,[[0,6]])}));return function(){return a.apply(this,arguments)}}();b.a={init:m}},function(a){a.exports=require('graphql-date')}]);
//# sourceMappingURL=main.map